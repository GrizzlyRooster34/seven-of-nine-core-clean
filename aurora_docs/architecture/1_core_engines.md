# Aurora Core: The Foundational Engines

---

## 1. Overview

The Aurora Core is built upon four foundational pillars, or "engines." These systems provide the essential, non-negotiable functions for any AI built with the framework: Security, Consciousness, Personality, and Memory. They are designed to be modular, deterministic, and safe by default.

---

## 2. The Security Framework

*   **Location:** `src/security/SecurityFramework.ts`
*   **Purpose:** To act as the primary, non-negotiable gatekeeper for all incoming interactions. It is the first system to inspect any input.
*   **Mechanism:**
    *   **Input Filtering:** It uses a configurable, tiered set of regular expressions to perform basic keyword filtering for obviously harmful or suspicious content (`strict`, `moderate`, `basic`).
    *   **Rate Limiting:** It includes a mechanism to prevent denial-of-service attacks by limiting the number of requests from a single identifier within a time window.
    *   **Session Validation:** It integrates a `SessionIntegrity` module to validate session tokens.
    *   **Audit Logging:** It maintains a persistent, in-memory audit log of all security events.

---

## 3. The Consciousness Engine

*   **Location:** `src/core/ConsciousnessEngine.ts`
*   **Purpose:** To serve as the core analytical "brain" of the AI. It deconstructs user input, generates a safe, template-based response, and orchestrates the other engines.
*   **Mechanism:**
    *   **NLU Pipeline:** It uses a pipeline of simple, regex-based analyzers to determine an input's `complexity`, `intent` (e.g., `help_request`, `information_seeking`), and `sentiment`.
    *   **Template-Based Response:** This core engine **does not call an LLM**. It generates a safe, predictable response from a hardcoded set of templates based on the analyzed intent.
    *   **Orchestration:** After generating a base response, it passes the response to the `PersonalityMiddleware` for stylistic filtering and sends the final interaction to the `MemoryEngine` for storage.

---

## 4. The Personality Middleware

*   **Location:** `src/middleware/PersonalityMiddleware.ts`
*   **Purpose:** To apply a consistent and customizable "personality" to the generic responses generated by the Consciousness Engine.
*   **Mechanism:**
    *   **Personality Profiles:** The system comes with several built-in profiles (`balanced`, `analytical`, `creative`, `empathetic`), each defined by a set of trait scores.
    *   **Text Transformation:** It acts as a filter, applying a series of rule-based text transformations to the response based on the active profile. For example, a high `assertive` score will cause it to replace "I think" with "I believe."

---

## 5. The Memory Engine

*   **Location:** `src/memory/MemoryEngine.ts`
*   **Purpose:** To provide a simple, file-based persistence layer for the AI's experiences.
*   **Mechanism:**
    *   **File-Based Storage:** It uses a JSON Lines (`.jsonl`) file as a simple, append-only data store.
    *   **Indexing:** To allow for efficient searching, it maintains a separate `memory-index.json` file that stores metadata and byte offsets for each memory item.
    *   **Search:** It provides basic search functionality by tag, category, and full-text search.
    *   **Compression:** It includes a basic compression mechanism that deletes the oldest 25% of low-importance memories when a configured maximum is reached.
